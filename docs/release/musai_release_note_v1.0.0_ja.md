
# 📦 リリースノート & デプロイ手順書
**バージョン:** v1.0.0  
**リリース日:** 2025/5/15  
**システム:** Musai Management

---

## 1. リリース内容

### 1.1. 新機能
- **従業員管理**：従業員の情報を追加・編集・削除。
- **休暇種別管理**：休暇の種類（有給、祝日、無給休暇など）を登録・編集・削除。
- **社員休暇管理**：各従業員の休暇を管理。
- **休暇承認**：担当者が休暇申請を承認・拒否・取り消す機能や、各従業員の休暇申請履歴を管理。
- **休暇申請**：社員が休暇申請を行う機能。
- **資料管理**：社内資料のアップロード、カレンダー通りに表示・管理する機能。
- **カレンダー**：承認された休暇を月間カレンダーで表示。

### 1.2. バグ修正
- 初回リリースのため、バグ修正はありません。

---

## 2. デプロイ手順

### 2.1. 事前準備

✅ **サーバー確認**
- サーバーのCPU、メモリ、ディスク容量を確認。
- JDK（21）のインストール確認。
- Node.js（v22）のインストール確認。

✅ **データベース確認**
- データベース名：`musai_management` が作成済みであること。
- アクセス権限・接続確認。（username=root、password=123456）
- データベースのバックアップ（初回はスキーマのみ、アップデート時はフルダンプ）。

✅ **ネットワーク・ファイアウォール確認**
- バックエンド（8080）、フロントエンド（5173）のポート開放。
- 各コンポーネント間（DB ↔ API ↔ フロント）の通信確認。

### 2.2. ビルド & デプロイ手順

#### ✅ バックエンドビルド (Java Spring Boot)
```bash
cd backend
mvn clean package -DskipTests
```
- 成果物：`target/` フォルダ内に `.jar` ファイル生成。

#### ✅ フロントエンドビルド (Vue.js)
```bash
cd frontend
npm install
npm run build
```
- 成果物：`dist/` フォルダ内に静的ファイルが生成。

#### ✅ バックエンドデプロイ
- `.jar` ファイルをサーバーに配置。
- 以下コマンドで起動：
```bash
java -jar musai-management-1.0.0.jar --spring.profiles.active=prod
```
- (systemd サービス化を推奨)

#### ✅ フロントエンドデプロイ
- `dist/` フォルダを Web サーバー (nginx/apache) に配置。
- 例：`/var/www/musai/` など。
- nginx リロード：
```bash
sudo systemctl reload nginx
```

### 2.3. 動作確認 (Sanity Check)
- バックエンドログ確認 
- フロントエンド ↔ バックエンド間のAPI通信確認。
- 以下機能の動作確認：
  - ログイン
  - 従業員一覧
  - 休暇申請
  - 資料アップロード
  - カレンダー表示

---

## 3. ロールバック手順
- **コードロールバック**：前バージョンの `.jar` / フロントビルドに戻して再デプロイ。
- **データベースロールバック**：バックアップからリストア。
- ロールバック後、各機能を再確認。

---

## 4. マイグレーション
- Spring Boot の自動マイグレーション機能を利用。
- 手動スクリプトは不要。
- マイグレーションログを確認し、エラーがないことを確認。

---

## 5. 担当者
- **リリース責任者**：（NGUYEN KHANH PHUNG）
- **障害時の連絡先**：（nguyen@musai-jin.com）

---

## 6. リリース後の注意点
- リリース後24時間、ログ監視を行う。
- 主要機能の動作確認を継続。
- ユーザーからのフィードバックを受け、必要に応じてホットフィックス対応。

